# Copyright (C) 2014 Microsoft Corporation

#CLSCompliant        = true

TARGETNAME          = Microsoft.OneGet

TARGETTYPE          = DYNLINK
TARGET_DESTINATION  = monad
MANAGED_CODE        = 1
URT_VER=4.0
# this will make AssemblyVersion = 1.0.0.0
ASSEMBLY_IDENTITY_VERSION_NAME=monadv1

## !include $(PROJECT_ROOT)\monad\nttargets\build\sources.inc
OBJDIR=$(OBJ_PATH)\$(O)

ASSEMBLY_IDENTITY_PUBLIC_KEY_NAME   = windows
SOURCES_PATH = .\

#PASS1_PUBLISH = {$(OBJ_PATH)\$(O)\$(TARGETNAME).metadata_dll=$(PROJECT_REF_PATH)\$(TARGETNAME).metadata_dll}

RESOURCES_NAMESPACE=Microsoft.OneGet.Resources

# Target for building resources
NTTARGETFILE1=$(NTTARGETFILE1) resources

MESSAGES_RESOURCES=$(OBJDIR)\$(RESOURCES_NAMESPACE).Messages.resources

RESOURCES= \
	$(MESSAGES_RESOURCES)

RESOURCES_SOURCES= \
	$(OBJDIR)\Messages.cs

LANGUAGE_SPECIFIC_MANAGED_RESOURCES=$(RESOURCES)

NTTARGETFILE0=$(NTTARGETFILE0) $(RESOURCES:;=)

REFERENCES=\
	$(OBJ_PATH)\..\Utility\$(O)\Microsoft.OneGet.Utility.metadata_dll; \
	$(CLR_REF_PATH)\System.metadata_dll; \
	$(CLR_REF_PATH)\System.Core.metadata_dll; \
    $(CLR_REF_PATH)\System.Runtime.Remoting.metadata_dll; \
	$(CLR_REF_PATH)\System.Xml.metadata_dll; \
	$(CLR_REF_PATH)\System.Xml.Linq.metadata_dll;

#region sourcefiles
SOURCES=\
	Api\ICoreApi.cs \
 	Api\IHostAPI.cs \
 	Api\IProviderServices.cs \
 	Api\IRequest.cs \
 	Api\IResponseApi.cs \
 	Builtin\ArpProvider.cs \
 	Builtin\BoostrapRequest.cs \
 	Builtin\BootstrapProvider.cs \
 	Builtin\CabArchiver.cs \
 	Builtin\MsiProvider.cs \
 	Builtin\MsuProvider.cs \
 	Builtin\SwidProvider.cs \
 	Builtin\VSixProvider.cs \
 	Builtin\WebDownloader.cs \
 	Builtin\WindowsFeaturesProvider.cs \
 	Builtin\WindowsUpdateProvider.cs \
 	Builtin\ZipArchiver.cs \
 	Implementation\ActionRequestObject.cs \
 	Implementation\Archiver.cs \
 	Implementation\Delegates.cs \
 	Implementation\DictionaryRequestObject.cs \
 	Implementation\Downloader.cs \
 	Implementation\DynamicOptionRequestObject.cs \
 	Implementation\EnumerableRequestObject.cs \
 	Implementation\Extensions.cs \
 	Implementation\FuncRequestObject.cs \
 	Implementation\Loader.cs \
 	Implementation\PackageManagementService.cs \
 	Implementation\PackageProvider.cs \
 	Implementation\PackageSourceRequestObject.cs \
 	Implementation\ProviderBase.cs \
 	Implementation\RemotableHostApi.cs \
 	Implementation\Request.cs \
 	Implementation\RequestObject.cs \
 	Implementation\SoftwareIdentityRequestObject.cs \
 	Packaging\DynamicOption.cs \
 	Packaging\Entity.cs \
 	Packaging\Evidence.cs \
 	Packaging\InstallationOptions.cs \
 	Packaging\Iso19770_2.cs \
 	Packaging\Link.cs \
 	Packaging\Meta.cs \
 	Packaging\OptionCategory.cs \
 	Packaging\OptionType.cs \
 	Packaging\PackageSource.cs \
 	Packaging\Payload.cs \
 	Packaging\SoftwareIdentity.cs \
 	Packaging\SoftwareIdentityVersionComparer.cs \
 	Packaging\SoftwareMetadata.cs \
 	Providers\IArchiver.cs \
 	Providers\IDownloader.cs \
 	Providers\IMetaProvider.cs \
 	Providers\IPackageProvider.cs \
 	Providers\IProvider.cs \
 	Constants.cs \
 	ErrorCategory.cs \
 	IPackageManagementService.cs \
 	PackageManager.cs \
	$(RESOURCES_SOURCES)

#endregion

INTERNALS_VISIBLE_TO=\
	Microsoft.OneGet.Test, PublicKey=$(WINDOWS_PUBLIC_KEY_STRING); \
	Microsoft.PowerShell.OneGet, PublicKey=$(WINDOWS_PUBLIC_KEY_STRING);

